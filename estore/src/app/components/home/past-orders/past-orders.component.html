<div class="max-w-6xl mx-auto bg-white p-8 h-[85vh] overflow-y-auto">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Left Column: Order Select + Products -->
    <div class="lg:col-span-2 space-y-6 min-h-[600px]">
      <!-- Select Order -->
      @if (pastOrders().length > 0) {
      <div>
        <label class="block text-lg font-semibold mb-2 text-gray-800"
          >Select Order</label
        >
        <select
          (change)="selectOrder($event)"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        >
          <option value="0" disabled selected>Please select value</option>
          @for (pastOrder of pastOrders(); track $index) {
          <option value="{{ pastOrder.orderId }}">
            {{ pastOrder.orderId }} Date: {{ pastOrder.orderDate }}
          </option>
          }
        </select>
      </div>
      } @if (pastOrder()) {
      <!-- Product List -->
      <div class="space-y-6">
        <h2 class="text-xl font-semibold text-gray-900">
          Previous Order Details
        </h2>
        @for (product of pastOrderProducts(); track product) {
        <div
          class="flex flex-col sm:flex-row gap-4 items-start bg-gray-50 p-4 rounded-lg"
        >
          <img
            [src]="product.productImage"
            alt="Product Image"
            class="w-full sm:w-32 h-32 object-cover rounded-md"
          />
          <div class="flex-1 space-y-1">
            <h3 class="text-lg font-medium text-gray-800">
              {{ product.productName }}
            </h3>
            <div class="text-sm text-gray-600">
              <span class="mr-2">Price:</span>
              <span class="font-semibold text-gray-900">{{
                product.price | currency
              }}</span>
            </div>
            <div class="text-sm text-gray-600">
              <span class="mr-2">Quantity:</span>
              <span class="font-semibold text-gray-900">{{ product.qty }}</span>
            </div>
          </div>
        </div>
        }
      </div>
      }
    </div>

    <!-- Right Column: Delivery + Summary (Steady Card) -->
    <div class="space-y-6">
      <!-- Delivery Address -->
      <div class="bg-gray-100 p-5 rounded-lg space-y-2 sticky top-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">
          Delivery Address
        </h2>
        <p><strong>Name:</strong> {{ pastOrder().userName }}</p>
        <p><strong>Address:</strong> {{ pastOrder().address }}</p>
        <p><strong>City:</strong> {{ pastOrder().city }}</p>
        <p><strong>State:</strong> {{ pastOrder().state }}</p>
        <p><strong>Pin:</strong> {{ pastOrder().pin }}</p>
      </div>

      <!-- Summary -->
      <div class="bg-gray-100 p-5 rounded-lg space-y-2 sticky top-[280px]">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Summary</h2>
        <p><strong>Order Total:</strong> {{ pastOrder().total | currency }}</p>
        <p><strong>Shipping Charges:</strong> Free</p>
        <hr />
        <p class="text-lg font-bold text-gray-900">
          Total: {{ pastOrder().total | currency }}
        </p>
      </div>
    </div>
  </div>
</div>
